#####################################################
###  When sentsy is turned on, start the timer    ###
#####################################################

  - alias: Start Lounge sentsy Timer
    initial_state: 'on'
    trigger:
      - platform: state
        entity_id: switch.lounge_sentsy_switch
        to: 'on'
    action:
      service: timer.start
      data:
        entity_id: timer.lounge_sentsy
        
  - alias: Start Lounge sentsy Timer
    initial_state: 'on'
    trigger:
      - platform: state
        entity_id: switch.lounge_sentsy_switch
        to: 'off'
    action:
      service: timer.cancel
      data:
        entity_id: timer.lounge_sentsy        

  - alias: Lounge Sentsy timer done
    initial_state: 'on'
    trigger:
      - platform: event
        event_type: timer.finished
        event_data:
          entity_id: timer.lounge_sentsy
    action:
      - service: switch.turn_off
        data:
          entity_id: switch.lounge_sentsy_switch   

## Kitchen Sentsy
  - alias: Start Kitchen sentsy Timer
    initial_state: 'on'
    trigger:
      - platform: state
        entity_id: switch.kitchen_sentsy_switch
        to: 'on'
    action:
      service: timer.start
      data:
        entity_id: timer.kitchen_sentsy
        
  - alias: Start Kitchen sentsy Timer
    initial_state: 'on'
    trigger:
      - platform: state
        entity_id: switch.kitchen_sentsy_switch
        to: 'off'
    action:
      service: timer.cancel
      data:
        entity_id: timer.kitchen_sentsy        

  - alias: Kitchen Sentsy timer done
    initial_state: 'on'
    trigger:
      - platform: event
        event_type: timer.finished
        event_data:
          entity_id: timer.kitchen_sentsy
    action:
      - service: switch.turn_off
        data:
          entity_id: switch.kitchen_sentsy_switch   


## Turn on sentsy when Kath leaves work

  - alias: Kath leaving work
    initial_state: 'on'
    trigger:
      - platform: zone
        event: leave
        zone: zone.kath_work
        entity_id: device_tracker.kathsiphone
    condition:
      - condition: time
        after: '16:00:00'      # after 4 pm
    action:
      - service: switch.turn_on
        data:
          entity_id: switch.lounge_sentsy_switch 
