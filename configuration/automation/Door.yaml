  - alias: Front door state change
    initial_state: 'on'
    trigger:
      - platform: state
        entity_id: lock.frontdoor_locked        
    action:
      - service: notify.slackbot
        data_template:
              message: >
                The front door lock changed from {{ trigger.from_state.state }}
                to {{ trigger.to_state.state }}. 
                
  - alias: Front unlocked
    initial_state: 'on'
    trigger:
      - platform: state
        entity_id: lock.frontdoor_locked     
        from: 'locked'
        to: 'unlocked'
    condition:
      - condition: state
        entity_id: alarm_control_panel.alarm
        state: 'armed'
    action:
      - service: alarm_control_panel.alarm_disarm
        data:
           entity_id: alarm_control_panel.alarm
           code: !secret pin
           
  - alias: Alarm Disarmed
    initial_state: 'on'
    trigger:
      - platform: state
        entity_id: alarm_control_panel.alarm    
        from: 'armed'
        to: 'disarmed'
    condition:
      - condition: state
        entity_id: lock.frontdoor_locked
        state: 'locked'
    action:
      - service: lock.unlock
        data:
           entity_id: lock.frontdoor_locked
