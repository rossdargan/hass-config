  - alias: Alarm disconnected from the network
    initial_state: 'on'
    trigger:
     - platform: state
       entity_id: device_tracker.alarmcom
       from: 'home'
       to: 'not_home'
    action:
      - service: notify.slackbot
        data:
          message: "Alarm has disconnected from the network."   
      - service: calendar.todoist_new_task
        data:
          content: 'Investigate why the alarm is off the network'
          project: 'Personal'
          priority: 1
          due_date_string: 'Today'
          labels: 'hass'

  - alias: Kath Home alarm notification
    initial_state: 'on'
    trigger:
      - platform: state
        entity_id: device_tracker.kathsiphone_2
        from: 'not_home'
        to: 'home'
    condition:
      - condition: state
        entity_id: sensor.alarm_state
        state: 'Away'
        for:
          hours: 1
    action:
      - service: notify.slackbot
        data:
          message: "Alarm disarmed because Kath is now home."
      - service: alarm_control_panel.alarm_disarm
        data:
          entity_id: alarm_control_panel.alarm
          code: !secret pin
     

  - alias: Ross Home alarm notification
    initial_state: 'on'
    trigger:
      - platform: state
        entity_id: device_tracker.ross_phone
        from: 'not_home'
        to: 'home'
    condition:
      - condition: state
        entity_id: sensor.alarm_state
        state: 'Away'
        for:
          hours: 1
    action:
      - service: notify.slackbot
        data:
          message: "Alarm disarmed because Ross is now home." 
      - service: alarm_control_panel.alarm_disarm
        data:
          entity_id: alarm_control_panel.alarm
          code: !secret pin

  - alias: Dad alarm notification
    initial_state: 'on'
    trigger:
      - platform: state
        entity_id: device_tracker.dad_phone
        from: 'not_home'
        to: 'home'
    condition:
      - condition: state
        entity_id: sensor.alarm_state
        state: 'Away'
        for:
          hours: 1
    action:
      - service: notify.slackbot
        data:
          message: "Alarm disarmed because Dad is now home." 
      - service: alarm_control_panel.alarm_disarm
        data:
          entity_id: alarm_control_panel.alarm
          code: !secret pin
